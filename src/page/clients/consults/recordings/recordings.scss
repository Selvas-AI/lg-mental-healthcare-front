@import "@/styles/common/common.scss";
@import "@/styles/common/layout.scss";

@keyframes loading {
    0% {
        transform: rotate(0);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* 녹취록 상세 */
.wrapper {
    &.recordings {
        header {
            .inner {
                .flex-wrap {
                    @include flexbox(row, center, center);;
                    gap: .8rem;
                    .input-wrap {
                        input {
                            width: 34.2rem;
                            height: 4.8rem;
                        }
                    }
                }
            }
        }
        main {
            > .inner {
                .move-up {
                    margin-bottom: 3rem;
                    .flex-wrap {
                        @include flexbox(row, center, center);;
                        gap: .8rem;
                        .input-wrap {
                            input {
                                width: 34.2rem;
                                height: 4.8rem;
                            }
                        }
                        > button {
                            display: none;
                            &.on {
                                display: block;
                            }
                        }
                    }
                }
            }
        }
    }
}

/* 검색어 입력창 */
.recordings .input-wrap {
    &.search {
        &.word-move {
            .move-helper {
                display: none;
                &.on {
                    display: flex;
                }
            }
        }
    }
}

/* 검색어 하이라이트 */
.txt-hlight {
    background: $secondary200;
}
.txt-hlight.active {
    background: #11ff72; /* 현재 선택된 하이라이트 색상 */
}

/* 탭 메뉴 */
.recordings .tab-menu {
    position: relative;
    width: 100%;
    &::before {
        content: '';
        position: absolute;
        top: 4.2rem;
        left: 0;
        width: 100%;
        height: 1px;
        background: $gray100;
    }
    .tab-list-wrap {
        position: relative;
        display: flex;
        gap: 2.8rem;
        .tab-list {
            width: 100%;
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
            gap: 2.4rem;
            li {
                position: relative;
                &.on {
                    a {
                        font-size: 2.2rem;
                        color: $gray950;
                        font-weight: 700;
                        transition: all 0.25s;
                    }
                }
                a {
                    display: inline-block;
                    width: 100%;
                    padding-bottom: .7rem;
                    font-size: 2.2rem;
                    color: $gray400;
                    font-weight: 500;
                    transition: all 0.25s;
                    text-align: center;
                }
            }
        }
        .tab-indicator {
            position: relative;
            width: 7.5rem;
            height: 3px;
            background: $gray950;
            left: 0px;
            transition: all 0.25s ease-in-out;
        }
        .info-bar {
            position: absolute;
            top: 0;
            right: 0;
            width: calc(100% - 19rem);
            @include flexbox(row, space-between, center);
            &::before {
                content: "";
                position: absolute;
                top: 50%;
                left: -1.4rem;
                transform: translateY(-50%);
                width: 1px;
                height: 1.4rem;
                background: #91A4AE;
            }
            .info {
                font-weight: 500;
                color: $gray400;
            }
            .panel-btn {
                position: relative;
                display: inline-block;
                height: 4.2rem;
                font-weight: 500;
                color: $gray400;
                @include flexbox(row, center, center);
                gap: .4rem;
                &::after {
                    content: "";
                    display: inline-block;
                    width: 2.4rem;
                    height: 2.4rem;
                    background: url(@/assets/images/icon/panel_open.svg) no-repeat center;
                }
            }
        }
    }
    .tab-cont {
        padding-top: 3rem;
        > div {
            width: 100%;
            height: 100%;
            display: none;
            &.on {
                display: block;
            }
        }
    }
}

/* 위험 발언 */
.dangerous-remark {
    color: #FF0606;
    font-weight: 500;
}

/* 녹음내용 탭 */
.record-area {
    width: 100%;
    border: 1px solid $gray50;
    border-radius: 2rem;
    background: $gray0;
    box-shadow: 0px 1px 6px 0px rgba(195, 195, 195, 0.20);
    .speak-wrap {
        padding: 3rem 1rem 0 3rem;
        .inner {
            height: calc(100vh - 35.4rem);
            padding-right: 1.2rem;
            @include flexbox(column, flex-start, flex-start);
            gap: 2rem;
            overflow-y: auto;
            .speaker {
                position: relative;
                width: 100%;
                padding: 1.2rem 1.2rem 1.2rem 6.6rem;
                border-radius: 1rem;
                &::before {
                    content: "";
                    position: absolute;
                    top: 1.2rem;
                    left: 1.2rem;
                    width: 4rem;
                    height: 4rem;
                }
                &01 {
                    &::before {
                        background: url(@/assets/images/common/face01.svg) no-repeat center/contain;
                    }
                }
                &02 {
                    &::before {
                        background: url(@/assets/images/common/face02.svg) no-repeat center/contain;
                    }
                }
                &.current {
                    background: rgba(239, 242, 243, 0.50);
                }
                &.stress-highlights {
                    background: $blue50;
                }
                .info {
                    padding-bottom: .6rem;
                    @include flexbox(row, flex-start, center);
                    gap: .8rem;
                    .speaker-id {
                        font-size: 1.8rem;
                        font-weight: 600;
                        color: $gray800;
                    }
                    .time {
                        font-weight: 500;
                        color: $gray300;
                    }
                }
                .content {
                    font-weight: 500;
                    line-height: 1.8;
                    color: $gray800;
                }
            }
        }
    }
    .control-wrap {
        .inner {
            .progress-bar {
                width: 100%;
                height: .6rem;
                background: $gray50;
                position: relative;
                cursor: pointer;
                .progress-fill {
                    height: 100%;
                    width: 0%;
                    background: $secondary500;
                }
            }
            .player {
                position: relative;
                width: 100%;
                padding: 0 3rem;
                height: 6rem;
                @include flexbox(row, space-between, center);
                .btn-wrap {
                    position: absolute;
                    left: 50%;
                    top: 50%;
                    transform: translate(-50%, -50%);
                    @include flexbox(row, center, center);
                    gap: 6rem;
                    button {
                        width: 3.2rem;
                        height: 3.2rem;
                        border: none;
                        &.skip-backward-btn {
                            background: url(@/assets/images/icon/skip_backward.svg) no-repeat center/contain;
                        }
                        &.play-btn {
                            background: url(@/assets/images/icon/play.svg) no-repeat center/contain;
                        }
                        &.pause-btn {
                            background: url(@/assets/images/icon/pause.svg) no-repeat center/contain;
                            display: none;
                        }
                        &.skip-forward-btn {
                            background: url(@/assets/images/icon/skip_forward.svg) no-repeat center/contain;
                        }
                    }
                }
                .time-info {
                    span {
                        font-size: 1.6rem;
                        font-weight: 500;
                        color: $gray600;
                    }
                }
            }
        }
    }
}

/* AI 분석 탭 */
.recordings .dashboard {
    .flex-wrap {
        @include flexbox(row, flex-start, flex-start);
        gap: 2.4rem;
    }
    .box, .txt-box {
        width: 100%;
        &:not(:last-child) {
            margin-bottom: 8rem;
        }
        .box-tit {
            @include flexbox(row, space-between, center);
            margin-bottom: 1.2rem;
            .btn-wrap {
                @include flexbox(row, flex-start, center);
                gap: 1.2rem;
                .edit-btn {
                    text-decoration: underline;
                    &::after {
                        content: none;
                    }
                }
            }
            strong {
                font-size: 2.2rem;
                font-weight: 700;
            }
        }
        .empty-board {
            padding: 1.6rem;
            border-radius: 1.4rem;
            background: $gray0;
            @include flexbox(row, center, center);
            text-align: center;
            font-weight: 500;
            color: $gray400;
        }
        &.summary , &.issue {
            .empty-board {
                height: 24.9rem;
            }
        }
        &.keyword , &.frequency {
            .empty-board {
                height: 19.6rem;
            }
        }
        &.stress {
            .empty-board {
                height: 21.4rem;
            }
        }
    }
    .box {
        position: relative;
        width: 100%;
        &.keyword, &.frequency {
            width: calc(50% - 1.2rem);
            > .con-wrap {
                padding: 3rem;
                width: 100%;
                height: 100%;
                @include flexbox(column, center, center);
                border-radius: 1.4rem;
                border: 1px solid $gray50;
                background: $gray0;
            }
        }
        &.stress {
            >.con-wrap {
                padding: 3rem 3rem 2.2rem;
                border-radius: 1.4rem;
                border: 1px solid $gray50;
                background: $gray0;
            }
        }
    }
    .txt-box {
        .editor-wrap {
            padding: 1.6rem 1.6rem .8rem;
            border-radius: 1.4rem;
            background: $gray0;
            .editor {
                height: 20rem;
            }
        }
    }
}

/* 가로(발화빈도) 막대 그래프 */
.bar-wrap {
    width: 100%;
    .legend {
        margin-bottom: 2rem;
        font-weight: 500;
        color: $gray500;
        @include flexbox(row, flex-start, center);
        span {
            position: relative;
            @include flexbox(row, center, center);
            gap: .6rem;
            &.counselor, &.client {
                &::before {
                    content: '';
                    display: inline-block;
                    width: 1.4rem;
                    height: 1.4rem;
                    border-radius: 50%;
                }
            }
            &.counselor {
                padding-right: 1.4rem;
                &::before {
                    background: #A0C9FF;
                }
            }
            &.client {
                &::before {
                    background: #7ACB93;
                }
            }
        }
    }
    .bar-labels {
        margin-bottom: 1.2rem;
        @include flexbox(row, space-between, center);
        > div {
            &:last-of-type {
                text-align: right;
            }
            span {
                font-weight: 700;
                color: $gray600;
                line-height: 2rem;
            }
            .value {
                font-size: 2.8rem;
                font-weight: 500;
                line-height: 3rem;
            }
        }
    }
    .bar-container {
        display: flex;
        height: 2.6rem;
        border-radius: 8px;
        overflow: hidden;
        .bar-counselor {
            background: #A0C9FF;
            height: 100%;
            margin-right: 5px;
        }
        .bar-client {
            background: #7ACB93;
            height: 100%;
        }
    }
    &.small {
        .legend {
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
        }
        .bar-labels {
            margin-bottom: 1rem;
            > div {
                .value {
                    font-size: 1.8rem;
                    color: $gray950;
                }
            }
        }
        .bar-container {
            height: 2rem;
            border-radius: .6rem;
        }
    }
}

/* 구간요약 */
.support-panel {
    > .inner {
        .panel-tit {
            padding: 2.8rem 2.4rem 1rem;
            .tit-wrap {
                @include flexbox(row, space-between, center);
                strong {
                    font-size: 2.2rem;
                    font-weight: 700;
                }
                .close-btn {
                    width: 2.4rem;
                    height: 2.4rem;
                    border: none;
                    background: url(@/assets/images/icon/close.svg) no-repeat center/contain;
                }
            }
            .info {
                position: relative;
                margin-top: 1.6rem;
                padding: .5rem .8rem;
                letter-spacing: -0.56px;
                white-space: nowrap;
                border-radius: .6rem;
                background: #FCF5FF;
                p {
                    font-size: 1.4rem;
                    font-weight: 500;
                    color: #C53EFF;
                    @include flexbox(row, flex-start, center);
                    gap: .4rem;
                    &::before {
                        content: "";
                        display: inline-block;
                        width: 2.4rem;
                        height: 2.4rem;
                        background: url(@/assets/images/icon/ixi.svg) no-repeat center/2rem;
                    }
                }
            }
        }
        .panel-cont {
            border-top: 1px solid $gray50;
        }
    }
    &.section-summary {
        > .inner {
            .panel-cont {
                height: calc(100vh - 22.2rem);
                padding: 3rem .6rem 3rem 2.4rem;
                .inner {
                    @include flexbox(column, flex-start, flex-start);
                    gap: 5rem;
                    padding-right: 1rem;
                    height: 100%;
                    overflow-x: hidden;
                    overflow-y: auto;
                    .section-info {
                        width: 100%;
                        .topic-wrap {
                            @include flexbox(row, space-between, center);
                            margin-bottom: .8rem;
                            .topic {
                                font-size: 1.8rem;
                                font-weight: 600;
                            }
                            .time {
                                padding: .2rem .8rem;
                                font-size: 1.4rem;
                                font-weight: 500;
                                color: $gray400;
                                border-radius: .6rem;
                                background: rgba(239, 242, 243, 0.50);
                                span {
                                    font-size: 1.4rem;
                                    font-weight: 500;
                                    color: $gray400;
                                }
                            }
                        }
                        .summary {
                            padding: 1rem 1.2rem;
                            border-radius: .8rem;
                            border: 1px solid $gray50;
                        }
                    }
                }
            }
        }
    }
    &.ai-create {
        > .inner {
            .panel-tit {
                padding: 2.8rem 2.4rem 1.2rem;
                .info {
                    padding: 0;
                    margin-top: .8rem;
                    background: transparent;
                    p {
                        color: $gray400;
                    }
                }
            }
            .panel-cont {
                height: calc(100vh - 20.7rem);
                padding: 1rem .6rem 3rem 2.4rem;
                /* 생성중 */
                .creating {
                    margin-right: 1.8rem;
                    padding-left: 1rem;
                    height: 4.1rem;
                    @include flexbox(row, flex-start, center);
                    gap: .8rem;
                    border-radius: .6rem;
                    background: #FCF5FF;
                    img {
                        width: 2rem;
                        height: 2rem;
                        object-fit: contain;
                        animation: loading 1s linear infinite;
                    }
                    p {
                        font-size: 1.4rem;
                        font-weight: 500;
                        color: #C53EFF;
                    }
                }
                /* 분석중, 생성오류 */
                .analyzing, .create-error {
                    margin-right: 1.8rem;
                    height: 100%;
                    @include flexbox(column, center, center);
                    gap: 1.2rem;
                    img {
                        width: 13.7rem;
                        height: 12.6rem;
                        object-fit: contain;
                    }
                    p {
                        text-align: center;
                        color: $gray400;
                        font-weight: 500;
                    }
                }
                /* 생성완료 */
                .complete {
                    padding-right: 1.6rem;
                    height: 100%;
                    overflow-x: hidden;
                    overflow-y: auto;
                    .top-info {
                        margin-bottom: 4rem;
                        p {
                            text-align: left;
                            font-size: 1.4rem;
                            font-weight: 500;
                            color: $gray300;
                        }
                    }
                    .con-wrap {
                        .complete-tit{
                            margin-bottom: .8rem;
                            &:not(:first-child) {
                                margin-top: 5rem;
                            }
                            strong {
                                font-size: 1.8rem;
                                font-weight: 600;
                            }
                        }
                        .complete-cont {
                            padding: 1rem 1.2rem;
                            font-weight: 500;
                            color: $gray600;
                            line-height: 1.5;
                            border: 1px solid $gray50;
                            border-radius: .8rem;
                            &.visual-wrap {
                                padding: 1.2rem 1.4rem;
                                min-height: 14rem;
                                @include flexbox(column, center, center);
                            }
                            .bullet-line {
                                font-weight: 500;
                                color: $gray600;
                                line-height: 1.5;
                                &::before {
                                    line-height: 1.5
                                }
                            }
                            .chart-data{
                                margin-top: .5rem;
                                span {
                                    font-size: 1.8rem;
                                    font-weight: 500;
                                    color: $gray600;
                                }
                            }
                        }
                    }
                    .btn-wrap {
                        padding-top: 1.6rem;
                        @include flexbox(row, center, center);
                        gap: .6rem;
                        .tooltip-wrap {
                            position: relative;
                            width: calc(50% - .3rem);
                            button {
                                width: 100%;
                            }
                            .tooltip {
                                position: absolute;
                                top: 7.6rem;
                                padding: 1.2rem 1.6rem;
                                color: $white;
                                font-size: 1.4rem;
                                font-weight: 500;
                                text-align: left;
                                border-radius: 1.4rem;
                                white-space: nowrap;
                                letter-spacing: -0.56px;
                                background: $gray600;
                                // display: none;
                                z-index: 10;
                                opacity: 0;
                                visibility: hidden;
                                transition: opacity 0.5s ease, visibility 0.2s;
                                &::before {
                                    content: '';
                                    position: absolute;
                                    top: -1.2rem;
                                    width: 0;
                                    height: 0;
                                    border-left: 10px solid transparent;
                                    border-right: 10px solid transparent;
                                    border-bottom: 14px solid $gray600;
                                }
                            }
                            &:nth-child(1) {
                                .tooltip {
                                    left: 0;
                                    &::before {
                                        left: 2rem;
                                    }
                                }
                            }
                            &:nth-child(2) {
                                .tooltip {
                                    right: 0;
                                    &::before {
                                        right: 2rem;
                                    }
                                    p {
                                        &:nth-of-type(2) {
                                            padding-top: 1rem;
                                        }
                                    }
                                }
                            }
                            .tooltip.show {
                                opacity: 1;
                                visibility: visible;
                            }
                        }
                    }
                    .bottom-info {
                        padding-top: 1.2rem;
                        p {
                            text-align: center;
                            font-size: 1.2rem;
                            font-weight: 500;
                            color: $gray300;
                        }
                    }
                    .skip-reason {
                        display: none;
                        .reason-tit {
                            padding-top: 3.2rem;
                            margin-bottom: 1.2rem;
                            font-size: 1.4rem;
                            font-weight: 700;
                            color: $gray600;
                        }
                        .reason-wrap {
                            ul {
                                width: 100%;
                                @include flexbox(row, flex-start, center);
                                gap: .8rem;
                                flex-wrap: wrap;
                                li {
                                    a {
                                        display: inline-block;
                                        padding: 0 1rem;
                                        height: 3.2rem;
                                        line-height: 3.2rem;
                                        font-size: 1.4rem;
                                        font-weight: 500;
                                        color: $gray400;
                                        border-radius: .8rem;
                                        border: 1px solid $gray100;
                                        background: $gray0;
                                        transition: all .25s;
                                        &.on {
                                            color: $secondary600;
                                            border: 1px solid $secondary500;
                                            background: $secondary50;
                                        }
                                    }
                                }
                            }
                            .select-complete {
                                padding-top: 1.2rem;
                                font-size: 1.4rem;
                                font-weight: 700;
                                color: $gray600;
                                display: none;
                                &.on {
                                    display: block;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

/* AI 생성하기 생략 사유 직접 입력 모달(팝업) */
.modal {
    &.direct-input {
        .inner {
            .editor-wrap {
                .editor {
                    height: 22.4rem;
                }
            }
        }
    }
}